!function(){"use strict";var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(t,s)};var t=function(){return(t=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<s;t++)for(var a=arguments[t],o=0,r=a.length;o<r;o++,n++)i[n]=a[o];return i}var i=function(){function e(){var e=this;this.pluginMode="insert",this.elStyles={},this.miscAttributes=[],this.miscClasses=[],this.reservedAttributes=[],this.reservedClasses=[],this.reservedClassesRegex=[],this.reservedIconClasses=[],this.reservedIconClassesRegex=[],this.reservedStyles=[],this.btnToggleActiveClass="btn-primary",this.btnToggleInactiveClass="btn-outline-secondary",this.beautifyOptions={indent_size:"4",indent_char:" ",max_preserve_newlines:"5",preserve_newlines:!0,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"collapse",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,wrap_line_length:"0",indent_inner_html:!1,comma_first:!1,e4x:!1,indent_empty_lines:!1},this.bootstrapDialogLogo='<span id="bootstrap-dialog-logo"><svg width="24" height="24"><path d="M16.7 11.7c2 1 2.8 2.6 2.6 4.6-.4 2.1-1.5 3.4-3.6 3.8-1 .2-2.2.2-3.3.2H6v-16H14c2.3 0 4 1.2 4.4 3 .3 1.8-.1 3.3-1.8 4.4zM9 17.8h4.8c1.4 0 2.3-.8 2.4-2 .1-1.4-.6-2.4-2-2.5-1.7-.2-3.4 0-5.2 0v4.5zm0-11v4h4.6c1.2 0 1.8-.8 1.8-2s-.5-2-1.8-2H9z"></path></svg></span>',this.editor=window.parent.tinymce.activeEditor,this.bsInstance=window.parent.tinymce.activeEditor.plugins.bootstrap.getInstance(),this.parentDocument=window.parent.document;var t=this.bsInstance.pluginUrl;loadjs(this.bsInstance.bootstrapCss),loadjs(["https://code.jquery.com/jquery-3.4.1.min.js",t+"langs/"+this.bsInstance.language+"-dialogs.js",t+"assets/js/dialogs-dot-data.js",t+"lib/dot/dot.min.js",t+"lib/prism/prism.min.css",t+"lib/prism/prism.min.js"],"bundle1"),loadjs.ready("bundle1",(function(){e.setPluginMode(),jQuery.noConflict(),jQuery(window.parent.document).find(".tox-dialog__header").prepend(e.bootstrapDialogLogo),jQuery(".selector *[data-value]").each((function(){jQuery(this).closest(".selector").attr("title",jQuery(this).data("value"))})),loadjs([t+"lib/js-beautify/beautify-html.min.js"],"js-beautify"),loadjs([t+"lib/nice-check/dist/js/jquery.nice-check.min.js",t+"lib/nice-check/dist/css/nice-check-gray-dark.min.css"],"niceCheck"),loadjs.ready("niceCheck",(function(){jQuery("body").niceCheck()})),loadjs.ready("js-beautify",(function(){e.init()}))}))}return e.prototype.init=function(){},e.prototype.addOriginalAttributes=function(){if(!Object.keys(this.miscAttributes).length)return"";for(var e=" ",t=0,s=Object.entries(this.miscAttributes);t<s.length;t++){var i=s[t];e+=i[0]+'="'+i[1]+'"'}return e},e.prototype.addOriginalClasses=function(){return this.miscClasses.length?" "+this.miscClasses.join(" "):""},e.prototype.escapeHtml=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(function(e){return t[e]}))},e.prototype.getOriginalAttributes=function(e){var t=this;void 0===e.classList&&(e=e[0]);for(var i=s(this.reservedAttributes,["data-mce-href","data-mce-selected","data-mce-src","data-mce-style","src","style"]),n=this.reservedClasses,a=this.reservedStyles,o=void 0,r=0,c=e.classList,l=c.length;r<l;r++)if(o=c[r],-1===n.indexOf(o))if(this.reservedClassesRegex.length<1)this.miscClasses.push(o);else for(var h=0,u=this.reservedClassesRegex;h<u.length;h++){var d=u[h],p=new RegExp(d,"g");o.match(p)||this.miscClasses.push(o)}var f=void 0,m=(r=0,e.attributes);for(l=m.length;r<l;r++)"class"!==(f=m[r]).nodeName&&-1===i.indexOf(f.nodeName)&&(this.miscAttributes[f.nodeName]=f.nodeValue);var g="";if(Object.keys(this.elStyles).forEach((function(e){-1===a.indexOf(e)&&(g+=" "+t.reverseCamelize(e)+":"+t.elStyles[e]+";")})),g.length>0){this.miscAttributes.style=g.trim()}},e.prototype.getIconClass=function(e){var t=this,s=[],i=jQuery(e).attr("class").split(" "),n=this.bsInstance.iconBaseClasses.join("|").length,a=new RegExp(this.bsInstance.iconSearchClass,"g"),o=new RegExp(this.bsInstance.iconBaseClasses.join("|"),"g");return jQuery.each(i,(function(e,i){if(n>0&&i.match(o))s.push(i);else if(i.match(a)){var r=!1;if(-1!==t.reservedIconClasses.indexOf(i)||-1!==t.reservedClasses.indexOf(i))r=!0;else for(var c=0,l=t.reservedIconClassesRegex;c<l.length;c++){var h=l[c],u=new RegExp(h,"g");i.match(u)&&(r=!0)}!1===r&&s.push(i)}})),s.join(" ")},e.prototype.getStyles=function(e){var t={};if(!e||!e.style||!e.style.cssText)return t;for(var s=e.style.cssText.split(";"),i=0;i<s.length;++i){var n=s[i].trim();if(n){var a=n.split(":");t[this.camelize(a[0].trim())]=a[1].trim()}}return t},e.prototype.initEvents=function(e){var t=this;void 0===e&&(e=!0),!0===e&&(jQuery(".selector").on("click",(function(e){var s=jQuery(e.target);s.hasClass("selector")&&(s=s.find(":first-child[data-prop]"));var i=s.data("prop");t[i]=s.data("value"),t.updateDialog(i,t[i]),t.render()})),jQuery('input[type="radio"]').on("change keyup",(function(e){var s=jQuery(e.target).data("prop");t[s]=jQuery(e.target).val(),t.updateDialog(s,t[s]),t.render()})),jQuery('input[type="text"], input[type="number"]').on("change keyup",(function(e){var s=jQuery(e.target).data("prop");t[s]=jQuery(e.target).val(),t.updateDialog(s,t[s],"text"),t.render()})),jQuery("select").on("change",(function(e){var s=jQuery(e.target).data("prop");t[s]=jQuery(e.target).val(),t.render()})),jQuery(".btn-group button").on("click",(function(e){var s=jQuery(e.target).data("prop");t[s]=jQuery(e.target).data("value"),t.updateDialog(s,t[s],"boolean"),t.render()})),jQuery("a.dropdown-item").on("click",(function(e){var s=jQuery(e.target).data("prop");t[s]=jQuery(e.target).data("value"),t.updateDialog(s,t[s],"dropdown"),t.render()}))),window.addEventListener("message",(function(e){if("customInsertAndClose"===e.data.mceAction){t.onBeforeMessage();var s={pluginMode:t.pluginMode,outputCode:t.gc()};jQuery("#preview-content").html().length>0&&window.parent.postMessage({mceAction:"execCommand",cmd:"iframeCommand",value:s},origin),window.parent.postMessage({mceAction:"close"},origin)}}))},e.prototype.onBeforeMessage=function(){var e=this;this.editor.dom.removeClass(this.editor.dom.select(".tbp-context-active"),"tbp-context-active"),this.editor.dom.select(".context-trigger-wrapper").forEach((function(t){e.editor.dom.remove(t)}))},e.prototype.render=function(){},e.prototype.setPluginMode=function(){console.log("No Action defined!")},e.prototype.updateDialog=function(e,t,s){void 0===s&&(s="array-value"),"array-value"===s?(jQuery("#"+e).find(".selector").removeClass("active"),jQuery("#"+e+' [data-value="'+t+'"]').closest(".selector").addClass("active")):"boolean"===s?(jQuery('button[data-prop="'+e+'"][data-value!="'+t+'"]').removeClass(this.btnToggleActiveClass).addClass(this.btnToggleInactiveClass),jQuery('button[data-prop="'+e+'"][data-value="'+t+'"]').removeClass(this.btnToggleInactiveClass).addClass(this.btnToggleActiveClass)):"radio"===s?jQuery('input[name="'+e+'"]').each((function(){jQuery(this).prop("checked",!1),jQuery(this).val()===t&&jQuery(this).prop("checked",!0)})):"text"===s||"number"===s||"select"===s?jQuery("#"+e).val(t):"dropdown"===s&&jQuery('*[data-content="'+e+'"]').html(t),jQuery("."+e+"-toggle")[0]&&(jQuery("."+e+"-toggle").removeClass("active"),jQuery("."+e+'-toggle[data-activate*="'+t+'"]').addClass("active"))},e.prototype.camelize=function(e){return e.replace(/(?:^|[-])(\w)/g,(function(e,t){return(t="-"===e.substr(0,1)?t.toUpperCase():t)||""}))},e.prototype.enc=function(e,t){var s=this.bsInstance.getKey(e);return this.bsInstance.cjs.AES.encrypt(t,s,{iv:this.bsInstance.cjs.enc.Utf8.parse("1111111111111111")}).ciphertext.toString(this.bsInstance.cjs.enc.Base64)},e.prototype.gc=function(){var e=this.gk(),t=this.enc(this.bsInstance.getHostname(),e),s=this.enc(t,jQuery("#preview-content").html());return encodeURI(s)},e.prototype.gk=function(){var e=this.bsInstance.getKey(this.bsInstance.getHostname()),t=this.bsInstance.cjs.AES.decrypt(this.bsInstance.key,e,{iv:this.bsInstance.cjs.enc.Utf8.parse("1111111111111111")});try{return t.toString(this.bsInstance.cjs.enc.Utf8)}catch(e){return!1}},e.prototype.reverseCamelize=function(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()}))},e}(),n={"bootstrap-icons":{css:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css",defaultIcon:"bi bi-house-fill",homeIcon:"bi bi-house-fill",selector:"bi-",baseClasses:["bi"]},"elegant-icons":{css:"elegant-icons.min.css",defaultIcon:"elegant-icon elegant-icon_globe_alt",homeIcon:"elegant-icon elegant-icon_house",selector:"elegant-",baseClasses:["elegant-icon"]},"feather-icons":{css:"feather-icons.min.css",defaultIcon:"feather-icon feather-power",homeIcon:"feather-icon feather-home",selector:"feather-",baseClasses:["feather-icon"]},"font-awesome-brands":{css:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css",defaultIcon:"fa-brands fa-font-awesome",homeIcon:"",selector:"fa-",baseClasses:["fa-brands"]},"font-awesome-regular":{css:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css",defaultIcon:"fa-regular fa-font-awesome",homeIcon:"fa-regular fa-house",selector:"fa-",baseClasses:["fa-regular"]},"font-awesome-solid":{css:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css",defaultIcon:"fa-solid fa-font-awesome",homeIcon:"fa-solid fa-house",selector:"fa-",baseClasses:["fa-solid"]},"font-awesome":{css:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css",defaultIcon:"fa-solid fa-font-awesome",homeIcon:"fa-solid fa-house",selector:"fa-[a-z]+",baseClasses:["fa-brands","fa-regular","fa-solid"]},"foundation-icons":{css:"foundation-icons.min.css",defaultIcon:"fi fi-trophy",homeIcon:"fi fi-home",selector:"fi-",baseClasses:["fi"]},"happy-icons":{css:"happy-icons.min.css",defaultIcon:"hm hm-badge1",homeIcon:"hm hm-home",selector:"hm-",baseClasses:["hm"]},icomoon:{css:"icomoon.min.css",defaultIcon:"icon-magic-wand",homeIcon:"icon-home",selector:"icon-",baseClasses:[]},"material-icons-filled":{css:"https://fonts.googleapis.com/css2?family=Material+Icons",defaultIcon:"mi-filled chair",homeIcon:"mi-home",selector:"mi-filled",baseClasses:[]},"material-icons-outlined":{css:"https://fonts.googleapis.com/css2?family=Material+Icons+Outlined",defaultIcon:"mi-outlined chair",homeIcon:"mi-outlined home",selector:"mi-outlined",baseClasses:[]},"material-icons-round":{css:"https://fonts.googleapis.com/css2?family=Material+Icons+Round",defaultIcon:"mi-round chair",homeIcon:"mi-round home",selector:"mi-round",baseClasses:[]},"material-icons-sharp":{css:"https://fonts.googleapis.com/css2?family=Material+Icons+Sharp",defaultIcon:"mi-sharp chair",homeIcon:"mi-round home",selector:"mi-sharp",baseClasses:[]},"material-icons-two-tone":{css:"https://fonts.googleapis.com/css2?family=Material+Icons+Two+Tone",defaultIcon:"mi-two-tone chair",homeIcon:"mi-round home",selector:"mi-two-tone",baseClasses:[]},"open-iconic":{css:"open-iconic.min.css",defaultIcon:"oi oi-globe",homeIcon:"oi oi-home",selector:"oi-",baseClasses:["oi"]},"tabler-icons":{css:"tabler-icons.min.css",defaultIcon:"ti ti-moon",homeIcon:"ti ti-home",selector:"ti-",baseClasses:["ti"]},"weather-icons":{css:"weather-icons.min.css",defaultIcon:"wi wi-thunderstorm",homeIcon:"",selector:"wi-",baseClasses:["wi"]},zondicons:{css:"zondicons.min.css",defaultIcon:"zi zi-trophy",homeIcon:"zi zi-home",selector:"zi-",baseClasses:["zi"]}};new(function(i){function a(){var e=i.call(this)||this;return e.blockLevel=!1,e.disabled=!1,e.hasIcon=!1,e.href="",e.icon="",e.iconFont=e.bsInstance.iconFont,e.iconPos="prepend",e.size="",e.style="btn-primary",e.tag="button",e.tagType="button",e.text="My Button",e}return function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}(a,i),a.prototype.init=function(){var e=this,i=t(t({},lang),dotData),n=document.querySelector("body").innerHTML,a=doT.template(n);document.querySelector("body").innerHTML=a(i),this.availableSizes=["btn-sm","btn-lg"],this.availableStyles=["btn-primary","btn-secondary","btn-success","btn-danger","btn-warning","btn-info","btn-light","btn-dark","btn-link","btn-outline-primary","btn-outline-secondary","btn-outline-success","btn-outline-danger","btn-outline-warning","btn-outline-info","btn-outline-light","btn-outline-dark"],this.availableTags=["button","a","input"],this.reservedAttributes=["disabled","href","type"],this.reservedClasses=s(this.availableSizes,this.availableStyles,["btn","tbp-active"]),this.setInitialProperties(this.editor.dom.select(".tbp-active")),this.initEvents(),loadjs(["../lib/universal-icon-picker/assets/js/universal-icon-picker.min.js",this.bsInstance.iconCssUrl],"iconpicker"),loadjs.ready("iconpicker",(function(){e.initIconPicker()}))},a.prototype.setPluginMode=function(){var e=this.editor.dom.select(".tbp-active");e.length>0&&jQuery(e).hasClass("btn")&&(this.pluginMode="replace")},a.prototype.render=function(){var e="",t={class:"",content:"",disabled:"",href:this.href,originalAttributes:"",tagType:this.tagType,text:this.text,textCode:""};t.class=this.style,""!==this.size&&(t.class+=" "+this.size),this.blockLevel&&(t.class+=" w-100"),t.class+=this.addOriginalClasses(),t.originalAttributes=this.addOriginalAttributes(),this.hasIcon&&"input"!==this.tag&&("prepend"===this.iconPos?t.text='<i class="'+this.icon+'"></i> '+this.text:t.text=this.text+' <i class="'+this.icon+'"></i>'),this.disabled&&(t.disabled=" disabled"),"a"===this.tag?e='<a href="'+t.href+'" class="btn '+t.class+'"'+t.originalAttributes+">"+t.text+"</a>":"button"===this.tag?e='<button type="'+t.tagType+'" class="btn '+t.class+'"'+t.disabled+t.originalAttributes+">"+t.text+"</button>":"input"===this.tag&&(e='<input type="'+t.tagType+'" class="btn '+t.class+'"'+t.disabled+' value="'+t.text+'"'+t.originalAttributes+" />"),jQuery("#preview-content").html(e),e=Prism.highlight(e,Prism.languages.markup),jQuery("#code-content pre").html(e)},a.prototype.initIconPicker=function(){var e=this,t={iconLibraries:[this.bsInstance.iconFont+".min.json"],iconLibrariesCss:[this.bsInstance.iconCssUrl],onSelect:function(t){e.icon=t.iconClass,jQuery("#iconpicker").html('<i class="'+e.icon+'"></i>'),e.render()}};new UniversalIconPicker("#iconpicker",t)},a.prototype.setInitialProperties=function(e){var t=this;if("replace"===this.pluginMode){if(this.availableStyles.forEach((function(s){jQuery(e).hasClass(s)&&(t.style=s)})),this.availableSizes.forEach((function(s){jQuery(e).hasClass(s)&&(t.size=s)})),this.availableTags.forEach((function(s){jQuery(e).is(s)&&(t.tag=s),"a"===t.tag?t.href=jQuery(e).attr("href"):t.tagType=jQuery(e).prop("type")})),this.blockLevel=jQuery(e).hasClass("w-100"),jQuery(e).find("span, i")[0]&&(this.icon=this.getIconClass(jQuery(e).find("span, i").get(0)),""!==this.icon)){this.hasIcon=!0;var s=this.icon.replace(" ","."),i=jQuery(e).clone();i.find("."+s).remove(),this.text=i.html(),!0===new RegExp("^"+this.text.trim()).test(jQuery(e).html().trim())&&(this.iconPos="append")}"button"===this.tag||"a"===this.tag?!0!==this.hasIcon&&(this.text=jQuery(e).html()):this.text=jQuery(e).val(),this.getOriginalAttributes(e)}""===this.icon&&(this.icon=n[this.bsInstance.iconFont].defaultIcon,jQuery("#iconpicker").html('<i class="'+n[this.bsInstance.iconFont].defaultIcon+'"></i>')),this.updateDialog("style",this.style),this.updateDialog("size",this.size),this.updateDialog("tag",this.tag),this.updateDialog("tagType",this.tagType,"radio"),this.updateDialog("hasIcon",this.hasIcon,"boolean"),this.updateDialog("iconPos",this.iconPos,"radio"),this.updateDialog("disabled",this.disabled,"boolean"),this.updateDialog("blockLevel",this.blockLevel,"boolean"),this.updateDialog("text",this.text,"text"),this.render()},a}(i))}();